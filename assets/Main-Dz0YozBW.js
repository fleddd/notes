var B=s=>{throw TypeError(s)};var S=(s,e,n)=>e.has(s)||B("Cannot "+n);var o=(s,e,n)=>(S(s,e,"read from private field"),n?n.call(s):e.get(s)),w=(s,e,n)=>e.has(s)?B("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,n),y=(s,e,n,i)=>(S(s,e,"write to private field"),i?i.call(s,n):e.set(s,n),n),b=(s,e,n)=>(S(s,e,"access private method"),n);import{S as W,s as Y,h as q,g as Z,n as K,u as A,r as C,a as V,b as X,c as d,D as J,N as k,B as L,U as ee,d as z,G as te,e as se,j as t,M as ne,m as M,F as ie,A as re,f as N,i as P,t as oe,k as ae,l as le,o as ce,p as D}from"./index-BCt6fz4R.js";var p,v,c,m,g,O,F,$,de=($=class extends W{constructor(e,n){super();w(this,g);w(this,p);w(this,v);w(this,c);w(this,m);y(this,p,e),this.setOptions(n),this.bindMethods(),b(this,g,O).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var i;const n=this.options;this.options=o(this,p).defaultMutationOptions(e),Y(this.options,n)||o(this,p).getMutationCache().notify({type:"observerOptionsUpdated",mutation:o(this,c),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&q(n.mutationKey)!==q(this.options.mutationKey)?this.reset():((i=o(this,c))==null?void 0:i.state.status)==="pending"&&o(this,c).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=o(this,c))==null||e.removeObserver(this)}onMutationUpdate(e){b(this,g,O).call(this),b(this,g,F).call(this,e)}getCurrentResult(){return o(this,v)}reset(){var e;(e=o(this,c))==null||e.removeObserver(this),y(this,c,void 0),b(this,g,O).call(this),b(this,g,F).call(this)}mutate(e,n){var i;return y(this,m,n),(i=o(this,c))==null||i.removeObserver(this),y(this,c,o(this,p).getMutationCache().build(o(this,p),this.options)),o(this,c).addObserver(this),o(this,c).execute(e)}},p=new WeakMap,v=new WeakMap,c=new WeakMap,m=new WeakMap,g=new WeakSet,O=function(){var n;const e=((n=o(this,c))==null?void 0:n.state)??Z();y(this,v,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},F=function(e){K.batch(()=>{var n,i,r,a,l,h,j,u;if(o(this,m)&&this.hasListeners()){const x=o(this,v).variables,f=o(this,v).context;(e==null?void 0:e.type)==="success"?((i=(n=o(this,m)).onSuccess)==null||i.call(n,e.data,x,f),(a=(r=o(this,m)).onSettled)==null||a.call(r,e.data,null,x,f)):(e==null?void 0:e.type)==="error"&&((h=(l=o(this,m)).onError)==null||h.call(l,e.error,x,f),(u=(j=o(this,m)).onSettled)==null||u.call(j,void 0,e.error,x,f))}this.listeners.forEach(x=>{x(o(this,v))})})},$);function R(s,e){const n=A(),[i]=C.useState(()=>new de(n,s));C.useEffect(()=>{i.setOptions(s)},[i,s]);const r=C.useSyncExternalStore(C.useCallback(l=>i.subscribe(K.batchCalls(l)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),a=C.useCallback((l,h)=>{i.mutate(l,h).catch(V)},[i]);if(r.error&&X(i.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:a,mutateAsync:r.mutate}}const he=()=>{const s=A(),{token:e}=d(),{mutateAsync:n}=R({mutationFn:async({id:i})=>await J(i,e),onSuccess:()=>{s.invalidateQueries({queryKey:[k]}).then(()=>{L.success("Note was successfully deleted!")})},onError:()=>{L.error("Failed to delete the note")}});return{deleteAsync:n}},ue=()=>{const{token:s}=d(),e=A(),{mutateAsync:n}=R({mutationFn:async({id:i,updatedNote:r})=>await ee(i,r,s),onSuccess:()=>{e.invalidateQueries({queryKey:[k]})},onError:()=>{L.error("Something went wrong when you tried to update the note.")}});return{updateAsync:n}},xe=s=>{const e=new Date(s);return`${e.getDate()}.${e.getMonth()+1}.${e.getFullYear()}`},me=s=>{const{token:e}=d();return z({queryFn:async()=>await te(s,e),queryKey:[`${k}_${s}`],refetchOnWindowFocus:!1})},ge=()=>{const s=A(),{token:e,noteMode:n}=d(),{isModalOpened:i,setIsModalOpened:r,openedNote:a}=d(),{data:l}=me(a),{register:h,control:j}=se({resolver:oe(ae),values:l||{}});return t.jsx(ne,{isModalOpened:i,setIsModalOpened:r,children:t.jsxs("div",{className:"w-full flex flex-col grow ",children:[t.jsx("div",{className:"flex justify-end items-center gap-2",children:t.jsx(M.button,{whileTap:{scale:.9},className:"border-2 border-black px-2 rounded-xl",onClick:()=>r(!1),children:"X"})}),t.jsx(ie,{control:j,action:`${re}notes/${a}`,method:"put",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},onError:({response:u})=>{L.error(`Some error occurred here. ${u==null?void 0:u.statusText}`)},onSuccess:()=>{s.invalidateQueries({queryKey:[k]}).then(()=>{L.success("Successfully created!"),r(!1)})},className:"w-full flex flex-col gap-4",children:t.jsxs("div",{children:[t.jsxs("div",{className:"flex flex-col gap-3 h-full",children:[t.jsxs("div",{className:"outline-none px-2 py-1 bg-gray-200 rounded-xl text-gray-700 font-bold max-w-fit ",children:[t.jsx("label",{htmlFor:"tag",children:"Tag: "}),t.jsxs("select",{disabled:n==N.showing,...h("tag",{required:!0}),className:"outline-none bg-gray-200 text-gray-700",name:"tag",id:"tag",children:[t.jsx("option",{className:"font-medium",value:"Home",children:"Home"}),t.jsx("option",{className:"font-medium",value:"Business",children:"Business"}),t.jsx("option",{className:"font-medium",value:"Personal",children:"Personal"})]})]}),t.jsx("input",{readOnly:n==N.showing,...h("title",{required:!0}),placeholder:"Title",className:"font-bold outline-none text-xl  "}),t.jsx("hr",{}),t.jsx("textarea",{readOnly:n==N.showing,...h("description"),placeholder:"Description",className:"outline-none text-gray-500  overflow-hidden h-[clamp(170px,170px,170px)] resize-none "})]}),n==N.editing&&t.jsx("div",{className:"text-center",children:t.jsx(P,{type:"submit",children:"Update"})})]})})]})})},T=({title:s,createdAt:e,tag:n,isDone:i,id:r,description:a})=>{const{deleteAsync:l}=he(),{updateAsync:h}=ue(),{isModalOpened:j,setNoteMode:u,setIsModalOpened:x,setOpenedNote:f}=d(),I=async()=>{await h({id:r,updatedNote:{Title:s,Description:a,IsDone:!i,Tag:n}})},U=async()=>await l({id:r}),Q=()=>{x(!0),f(r),u(N.editing)},_=()=>{x(!0),f(r),u(N.showing)},G=xe(e);return t.jsxs(t.Fragment,{children:[t.jsx(le,{children:j&&t.jsx(ge,{})}),t.jsxs(M.div,{className:" min-h-48 max-h-48   bg-white rounded-lg grow shrink p-4 shadow-md flex flex-col justify-around gap-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("div",{className:"bg-gray-200 text-gray-700 rounded-full px-2 py-1",children:n}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(H,{size:30,isChecked:i,onClick:I}),t.jsx(je,{size:30,onClick:Q}),t.jsx(ye,{size:30,onClick:U})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"text-xl",children:s}),t.jsx("div",{className:"text-gray-500 text-xs",children:t.jsx("button",{type:"button",onClick:_,children:"Show more"})})]}),t.jsxs("div",{className:"text-xs text-end",children:["Created at ",G]})]})]})},pe="data:image/svg+xml,%3c?xml%20version='1.0'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='50px'%20height='50px'%3e%3cpath%20d='M19,3H5C3.895,3,3,3.895,3,5v14c0,1.105,0.895,2,2,2h14c1.105,0,2-0.895,2-2V5C21,3.895,20.105,3,19,3z%20M10.707,16.707%20c-0.391,0.391-1.024,0.391-1.414,0L6,13.414C5.61,13.024,5.61,12.39,6,12l0,0c0.39-0.39,1.024-0.39,1.414,0L10,14.586L16.586,8%20C16.976,7.61,17.61,7.61,18,8v0c0.39,0.39,0.39,1.024,0,1.414L10.707,16.707z'/%3e%3c/svg%3e",ve="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='50px'%20height='50px'%3e%3cpath%20d='M%205%203%20C%203.9069372%203%203%203.9069372%203%205%20L%203%2019%20C%203%2020.093063%203.9069372%2021%205%2021%20L%2019%2021%20C%2020.093063%2021%2021%2020.093063%2021%2019%20L%2021%205%20C%2021%203.9069372%2020.093063%203%2019%203%20L%205%203%20z%20M%205%205%20L%2019%205%20L%2019%2019%20L%205%2019%20L%205%205%20z%20M%2016.292969%208.2929688%20L%2010%2014.585938%20L%207.7070312%2012.292969%20L%206.2929688%2013.707031%20L%2010%2017.414062%20L%2017.707031%209.7070312%20L%2016.292969%208.2929688%20z'/%3e%3c/svg%3e",H=({size:s,isChecked:e,onClick:n,id:i})=>{const r=e?pe:ve;return t.jsx("img",{src:r,id:i,height:s,width:s,alt:"Checkbox",onClick:n,className:"cursor-pointer"})},fe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2050%2050'%20width='50px'%20height='50px'%3e%3cpath%20d='M%2043.125%202%20C%2041.878906%202%2040.636719%202.488281%2039.6875%203.4375%20L%2038.875%204.25%20L%2045.75%2011.125%20C%2045.746094%2011.128906%2046.5625%2010.3125%2046.5625%2010.3125%20C%2048.464844%208.410156%2048.460938%205.335938%2046.5625%203.4375%20C%2045.609375%202.488281%2044.371094%202%2043.125%202%20Z%20M%2037.34375%206.03125%20C%2037.117188%206.0625%2036.90625%206.175781%2036.75%206.34375%20L%204.3125%2038.8125%20C%204.183594%2038.929688%204.085938%2039.082031%204.03125%2039.25%20L%202.03125%2046.75%20C%201.941406%2047.09375%202.042969%2047.457031%202.292969%2047.707031%20C%202.542969%2047.957031%202.90625%2048.058594%203.25%2047.96875%20L%2010.75%2045.96875%20C%2010.917969%2045.914063%2011.070313%2045.816406%2011.1875%2045.6875%20L%2043.65625%2013.25%20C%2044.054688%2012.863281%2044.058594%2012.226563%2043.671875%2011.828125%20C%2043.285156%2011.429688%2042.648438%2011.425781%2042.25%2011.8125%20L%209.96875%2044.09375%20L%205.90625%2040.03125%20L%2038.1875%207.75%20C%2038.488281%207.460938%2038.578125%207.011719%2038.410156%206.628906%20C%2038.242188%206.246094%2037.855469%206.007813%2037.4375%206.03125%20C%2037.40625%206.03125%2037.375%206.03125%2037.34375%206.03125%20Z'/%3e%3c/svg%3e",je=({size:s,onClick:e})=>t.jsx(M.img,{whileTap:{scale:.9},src:fe,height:s,width:s,alt:"Checkbox",onClick:e,className:"cursor-pointer"}),we="data:image/svg+xml,%3c?xml%20version='1.0'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2030%2030'%20width='50px'%20height='50px'%3e%3cpath%20d='M%2014.984375%202.4863281%20A%201.0001%201.0001%200%200%200%2014%203.5%20L%2014%204%20L%208.5%204%20A%201.0001%201.0001%200%200%200%207.4863281%205%20L%206%205%20A%201.0001%201.0001%200%201%200%206%207%20L%2024%207%20A%201.0001%201.0001%200%201%200%2024%205%20L%2022.513672%205%20A%201.0001%201.0001%200%200%200%2021.5%204%20L%2016%204%20L%2016%203.5%20A%201.0001%201.0001%200%200%200%2014.984375%202.4863281%20z%20M%206%209%20L%207.7929688%2024.234375%20C%207.9109687%2025.241375%208.7633438%2026%209.7773438%2026%20L%2020.222656%2026%20C%2021.236656%2026%2022.088031%2025.241375%2022.207031%2024.234375%20L%2024%209%20L%206%209%20z'/%3e%3c/svg%3e",ye=({size:s,onClick:e})=>t.jsx(M.img,{whileTap:{scale:.9},src:we,height:s,width:s,alt:"Checkbox",onClick:e,className:"cursor-pointer"});var E=(s=>(s.All="All",s.Home="Home",s.Business="Business",s.Personal="Personal",s))(E||{});const be=({notesLength:s})=>{const{currentPage:e,setNextPage:n,setPreviousPage:i}=d(),a=Math.round(s/6);return t.jsxs("div",{className:"flex justify-center gap-3",children:[e>1&&t.jsx("div",{children:t.jsx(P,{onClick:i,children:"Previous page"})}),s>6&&t.jsxs("div",{children:["Current page: ",e]}),a>e&&t.jsx("div",{children:t.jsx(P,{onClick:n,children:"Next Page"})})]})},Ce=({currFilter:s,data:e,hideCompleted:n})=>{const i=s===E.All;if(e==null)return t.jsx("div",{children:"Loading"});const{notes:r,amount:a}=e;return t.jsxs("div",{className:"flex flex-col justify-center gap-3",children:[t.jsx("div",{className:"w-full grid grid-cols-sm-notes md:grid-cols-md-notes lg:grid-cols-notes gap-3 max-sm:px-5",children:r.map(l=>n?(s.toLowerCase()===l.tag.toLowerCase()||i)&&!n==l.isDone?t.jsx(T,{...l},l.createdAt):null:s.toLowerCase()==l.tag.toLowerCase()||i?t.jsx(T,{...l},l.createdAt):null)}),a!=0?t.jsx(be,{notesLength:a}):t.jsx("div",{children:"There is no notes there."})]})},Ne=({filterName:s})=>{const{setCurrentFilter:e,currentFilter:n}=d(),i=n===s,r=()=>{e(s)},a={hidden:{borderColor:"#eeeeee"},visible:{borderColor:"#242424"}};return t.jsx(M.button,{variants:a,initial:!1,transition:{type:"spring"},animate:i?"visible":"hidden",className:`leading-2 text-center min-w-20 sm:min-w-24 border-b-2  pb-1 ${i?"border-black":"border-gray-200"}`,type:"button",onClick:r,children:s})},Le=({filters:s})=>{const{setHideCompleted:e,isHideCompleted:n}=d();return t.jsx("div",{className:"w-full flex flex-col gap-5",children:t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center max-sm:gap-3",children:[t.jsx("div",{className:"flex flex-nowrap",children:s.map(i=>t.jsx(Ne,{filterName:i},i))}),t.jsx("div",{className:"flex items-center gap-1",children:t.jsxs("button",{onClick:e,className:"flex",children:[t.jsx(H,{id:"hideCompleted",size:25,isChecked:n}),t.jsx("label",{htmlFor:"hideCompleted",className:"select-none cursor-pointer",children:"Hide completed"})]})})]})})},ke=()=>{const{token:s,currentPage:e}=d();return z({queryKey:[k,e],queryFn:async()=>await ce("notes",s,e),refetchOnWindowFocus:!1})},Me=()=>t.jsxs("div",{className:" w-full flex flex-col justify-center items-center gap-5",children:[t.jsx("div",{className:"px-5",children:"Login into existing account or create a new one to use this app."}),t.jsxs("div",{className:"flex gap-5",children:[t.jsx(D,{to:"Login",className:"bg-black text-white px-2 py-1 rounded-xl",children:"Login"}),t.jsx(D,{to:"Register",className:"bg-black text-white px-2 py-1 rounded-xl",children:"Register"})]})]}),Pe=()=>{const{data:s,isLoading:e,isError:n}=ke(),i=Object.values(E),{currentFilter:r,isHideCompleted:a}=d();return n&&L.error("Something went wrong!"),!s&&!e?t.jsx(Me,{}):e?t.jsx("div",{children:"Loading..."}):t.jsxs("main",{className:"flex flex-col gap-3 w-full justify-center items-center sm:px-20",children:[t.jsx(Le,{filters:i}),t.jsx(C.Suspense,{fallback:t.jsx("div",{children:"Loading..."}),children:t.jsx(Ce,{hideCompleted:a,currFilter:r,data:s})})]})};export{Pe as default};
